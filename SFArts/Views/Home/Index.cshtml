@{
    ViewBag.Title = "Home Page";
}
<link rel="stylesheet" href="../../Content/CSS/Style.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $("#hide-button").click(function() {
            $("#left-side").toggleClass("col-md-6");
            $("#left-side").toggleClass("col-md-3");
            $("#right-side").toggleClass("col-md-6");
            $("#right-side").toggleClass("col-md-9");

            if ($("#carousel-wraper").css("display") == "none"){
                $('#carousel-wraper').css('display', 'block');
                $("#calendar").css("height", "100%");
            }
            else{
                $("#carousel-wraper").css("display", "none");
                $("#calendar").css("height", "100vh");
            }

            $("#calendar").toggleClass("col-md-3");
            $("#calendar").toggleClass("col-md-12");
            $("#carousel-wraper").toggleClass("col-md-9");

            $("#hide-button").toggleClass("hide-button");
            $("#hide-button").toggleClass("show-button");

            if ($("#hide-button").hasClass("hide-button")) {
                $("#hide-button").html("<span class=\"glyphicon glyphicon-chevron-left\"></span>");
            } else {
                $("#hide-button").html("<span class=\"glyphicon glyphicon-chevron-right\"></span>");
            }


        });

        $(".sidebar").hover(function () {
            $(this).fadeTo(400,1);
        }, function () {
            $(this).fadeTo(400,0);
        });

        $(".table tr").click(function () {
            var selected = $(".table .selected");
            $(".table .selected").removeClass("selected").removeClass("my-active");
            $(this).addClass("selected");
        });

        $(".table tr").hover(function() {
            $(this).addClass("my-active");
        }, function () {
            $(this).removeClass("my-active");
        });

        $('[data-toggle="tooltip"]').tooltip();

        @*$(".calendar-item").click(function () {
            console.log("menu item has been clicked");
            var clicked = $(this);
            console.log(clicked);
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetPostsOfCategoryId", "Home")" + "?id=" + encodeURIComponent(clicked.attr("category")),
                success: function(response) {
                    console.log(response);
                }
            });
        });*@
    });
</script>


<div class="sidebar">
    <ul>
        <li> <img src="../../Content/Images/Sidebar/menu.png" rel="tooltip" data-toggle="tooltip" data-html="true" data-placement="right"
                  title="<h3>Menu </h3>"/> </li>
        <li> <img src="../../Content/Images/Sidebar/left_arrow.png" rel="tooltip" data-toggle="tooltip" data-html="true" data-placement="right"
                  title="<h3>Back </h3>"/>   </li>
        <li> <img src="../../Content/Images/Sidebar/location.png" rel="tooltip" data-toggle="tooltip" data-html="true" data-placement="right"
                  title="<h3>Nearby </h3>"/>  </li>
        <li> <img src="../../Content/Images/Sidebar/star.png" rel="tooltip" data-toggle="tooltip" data-html="true" data-placement="right"
                  title="<h3>Favorite </h3>"/>  </li>
        <li> <img src="../../Content/Images/Sidebar/search.png" rel="tooltip" data-toggle="tooltip" data-html="true" data-placement="right"
                  title="<h3>Find </h3>"/>  </li>
        <li> <img src="../../Content/Images/Sidebar/phone.png" rel="tooltip" data-toggle="tooltip" data-html="true" data-placement="right"
                  title="<h3>Mobile version </h3>"/>  </li>
    </ul>
</div>

<div class="container-fluid" id="initial-container">
    <div class="row" id="initial-row">

        <div class="col-md-6" id="left-side">
            
            <div class="col-md-9" id="carousel-wraper">
                <div id="myCarousel" class="carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#myCarousel" data-slide-to="1"></li>
                        <li data-target="#myCarousel" data-slide-to="2"></li>
                        <li data-target="#myCarousel" data-slide-to="3"></li>
                    </ol>

                    <div class="carousel-inner" role="listbox">
                        <div class="item active">
                            <img src="../../Content/Images/exhibit.jpg" alt="Exhibit">
                        </div>

                        <div class="item">
                            <img src="../../Content/Images/exhibit.jpg" alt="Exhibit">
                        </div>

                        <div class="item">
                            <img src="../../Content/Images/exhibit.jpg" alt="Exhibit">
                        </div>

                        <div class="item">
                            <img src="../../Content/Images/exhibit.jpg" alt="Exhibit">
                        </div>
                    </div>

                    <!-- Left and right controls -->
                    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>

                </div>

                <div class="carousel-bottom-buttons">
                    <div class="row">
                        <div class="col-md-6"><button class="btn btn-success btn-block"> SF/Arts EXPRESS APP</button>
                        </div>
                        <div class="col-md-6"><button class="btn btn-warning btn-block"> SF/Arts MONTHLY</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-3" id="calendar">
                <table class="table">
                    <thead><th>calendar highlights</th></thead>
                    <tr data-bind="click:loadData.bind($data,1)" class="calendar-item my-active selected" category="0"><td>Current/Soon</td></tr>
                    <tr data-bind="click:loadData.bind($data,2)" class="calendar-item"  ><td>Children</td></tr>
                    <tr data-bind="click:loadData.bind($data,3)" class="calendar-item"  ><td>Dance</td></tr>
                    <tr data-bind="click:loadData.bind($data,4)" class="calendar-item"  ><td>Festivals</td></tr>
                    <tr data-bind="click:loadData.bind($data,5)" class="calendar-item"  ><td>Film/Video</td></tr>
                    <tr data-bind="click:loadData.bind($data,6)" class="calendar-item"  ><td>Galleries</td></tr>
                    <tr data-bind="click:loadData.bind($data,7)" class="calendar-item"  ><td>Literary arts</td></tr>
                    <tr data-bind="click:loadData.bind($data,8)" class="calendar-item"  ><td>More For Less</td></tr>
                    <tr data-bind="click:loadData.bind($data,9)" class="calendar-item"  ><td>Music</td></tr>
                    <tr data-bind="click:loadData.bind($data,10)" class="calendar-item" ><td>Museums</td></tr>
                    <tr data-bind="click:loadData.bind($data,11)" class="calendar-item" ><td>Public Art</td></tr>
                    <tr data-bind="click:loadData.bind($data,12)" class="calendar-item" ><td>Theater</td></tr>
                </table>

                <button class="btn-xs btn-success hide-button" id="hide-button">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                </button>
            </div>

        </div>

        <div class="col-md-6" id="right-side">
         
               <div id="news-feed">

                <div class="col-md-4" data-bind="foreach: firstColumn">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <img data-bind="attr:{src:imageURL}" class="img-responsive" />
                        </div>
                        <div class="panel-body" data-bind="text:content">
                        </div>
                    </div>
                </div>

                <div class="col-md-4" data-bind="foreach: secondColumn">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <img data-bind="attr:{src:imageURL}" class="img-responsive" />
                        </div>
                        <div class="panel-body" data-bind="text:content">
                        </div>
                    </div>
                </div>

                <div class="col-md-4" data-bind="foreach: thirdColumn">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <img data-bind="attr:{src:imageURL}" class="img-responsive" />
                        </div>
                        <div class="panel-body" data-bind="text:content">
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>

<script type="text/javascript" src="~/Scripts/knockout-3.4.0.js"></script>
<script>
    

    function Post(imageURL, content, category) {
        this.imageURL = imageURL;
        this.content = content;
        this.category = category;
    }

    function PostViewModel() {
        var self = this;

        self.firstColumn = ko.observableArray([
            new Post("../../Content/Images/Events/conductor.jpg", "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt \
                            ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco \
                            laboris nisi ut aliquip ex ea commodo consequat. <a href=\"#\">See more...</a>"),
            new Post("../../Content/Images/Events/men-in-park.jpeg", "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt \
                            ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco \
                            laboris nisi ut aliquip ex ea commodo consequat. <a href=\"#\">See more...</a>")
        ]);

        self.secondColumn = ko.observableArray([
            new Post("../../Content/Images/Events/manufacturer.jpg", "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt \
                            ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco \
                            laboris nisi ut aliquip ex ea commodo consequat. <a href=\"#\">See more...</a>"),
            new Post("../../Content/Images/Events/earthshake.jpg", "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt \
                            ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco \
                            laboris nisi ut aliquip ex ea commodo consequat. <a href=\"#\">See more...</a>")
        ]);

        self.thirdColumn = ko.observableArray([
            new Post("../../Content/Images/Events/lama.jpg", "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt \
                            ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco \
                            laboris nisi ut aliquip ex ea commodo consequat. <a href=\"#\">See more...</a>"),
            new Post("../../Content/Images/Events/exhibition.jpeg", "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt \
                            ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco \
                            laboris nisi ut aliquip ex ea commodo consequat. <a href=\"#\">See more...</a>")
        ]);

        self.loadData = function (sender) {
            $.getJSON("@Url.Action("GetPostsOfCategoryId", "Home")" + "?id=" + sender, function (data) {
                var delta = 3;
                self.firstColumn.removeAll();
                self.secondColumn.removeAll();
                self.thirdColumn.removeAll();

                for (var i = 0; i < data.length; i += delta) {
                    self.firstColumn.push(new Post(data[i].ImageURL, data[i].Content));
                }
                for (i = 1; i < data.length; i += delta) {
                    self.secondColumn.push(new Post(data[i].ImageURL, data[i].Content));
                }
                for (i = 2; i < data.length; i += delta) {
                    self.thirdColumn.push(new Post(data[i].ImageURL, data[i].Content));
                }
            });
        }

    }
    ko.applyBindings(new PostViewModel());

</script>